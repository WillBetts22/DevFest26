"use strict";
// ==============================================================================
//                  Â© 2025 Dedalus Labs, Inc. and affiliates
//                            Licensed under MIT
//           github.com/dedalus-labs/dedalus-sdk-typescript/LICENSE
// ==============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
exports.createToolHandler = createToolHandler;
const schemas_1 = require("../utils/schemas.js");
/** Creates a tool registry with schema generation and execution capabilities. */
function createToolHandler(tools) {
    const toolsByName = new Map(Array.from(tools).map((fn) => [fn.name, fn]));
    return {
        schemas() {
            const schemas = [];
            for (const fn of toolsByName.values()) {
                try {
                    schemas.push((0, schemas_1.toSchema)(fn));
                }
                catch (err) {
                    throw new Error(`[DedalusRunner] Invalid tool "${fn.name}": ${String(err)}`);
                }
            }
            return schemas;
        },
        async exec(name, args) {
            const fn = toolsByName.get(name);
            if (!fn)
                throw new Error(`Unknown tool: ${name}`);
            const res = fn.length === 1 ? fn(args) : fn(...Object.values(args));
            return await Promise.resolve(res);
        },
        listNames() {
            return Array.from(toolsByName.keys());
        },
    };
}
//# sourceMappingURL=tools.js.map